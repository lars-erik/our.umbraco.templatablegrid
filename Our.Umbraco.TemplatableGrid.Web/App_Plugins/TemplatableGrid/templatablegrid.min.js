(function(){"use strict";function n(n){var t=n.model;!t.value&&t.config&&t.config.template&&(t.value=t.config.template)}app.controller("Umbraco.PropertyEditors.TemplatableGridController",["$scope",n])})(),function(){function n(t,i){return t?t[i]?t[i]:t.$parent?n(t.$parent,i):null:null}function t(n,t){return n?$.grep(n,function(n){return n.alias===t})[0]:null}function i(i,r){var e=n(i,"preValues"),f=t(e,"items"),u=i.model;if(!f){i.unsupported=!0;return}i.gridPath="/umbraco/views/propertyeditors/grid/grid.html";i.layoutConfig=f;i.reset=function(){r.confirm("Do you really want to reset?")&&(u.value=undefined)};i.$watch("layoutConfig.value",function(){u.config={items:f.value}});i.$watchCollection("layoutConfig.value.templates",function(){var n=u.value?u.value.name:"",t=$.grep(f.value?f.value.templates:[],function(t){return t.name===n});n&&t.length===0&&u.value&&(u.value=undefined)})}app.controller("Umbraco.PropertyEditors.TemplatableGridPrevaluesController",["$scope","$window",i])}();